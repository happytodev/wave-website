
<header x-data="{ 
    hovered: '',
    active: 'home',
    lastKnownScrollY: 0,
    ticking: false,
    markerPosition: {
        width: 0,
        height: 0,
        left: 0,
        right: 0
    },
    mobileMenu: false,
    fullWidth: false,
    calculateMarkerPosition(hoveredElement){
        const markerElement = document.getElementById('marker');

        if(hoveredElement)
        {
            // Get the width, height, top, and left position of the hovered element
            const width = hoveredElement.offsetWidth;
            const height = hoveredElement.offsetHeight;
            const top = hoveredElement.offsetTop;
            const left = hoveredElement.offsetLeft;

            // Apply the values to the marker element
            this.markerPosition.width = width;
            this.markerPosition.height = height;
            this.markerPosition.top = top;
            this.markerPosition.left = left;
        }
    },
    markerPositionOriginalPosition(){
        this.calculateMarkerPosition(document.querySelector('[data-' + this.active +']'));
    },
    resetProgressWidth(){
        const targetElement = document.getElementById('nav-border-animated');
        targetElement.style.width = `0%`;
    }
}" 
@set-page-active="scrollTop(); active = $event.detail.active; resetProgressWidth()"
@set-page-full-width="fullWidth=true"
id="header"
x-init="

    if(window.location.pathname.includes('docs')){
        fullWidth = true;
        active='docs';
    }

    if(window.location.pathname.includes('themes')){
        fullWidth = true;
        active='themes';
    }

    $watch('mobileMenu', function(value){
        if(value){
            window.dispatchEvent(new CustomEvent('close-left-sidebar', {}));
        }
    })

    $watch('active', function(value){
        setTimeout(function(){
            calculateMarkerPosition(document.querySelector('[data-' + value +']'));
        }, 10);
    });

    hovered = active;

    window.addEventListener('resize', function(e){
        console.log('risize');
        calculateMarkerPosition(document.querySelector('[data-' + active +']'));
    });

    window.addEventListener('scroll', function(e) {
        this.lastKnownScrollY = window.scrollY;

        if(window.scrollY > 10) {
            scrolled = true;
            
            // document.getElementById('site-content').style.marginTop = '-10px';
        } else {
            scrolled = false;
            
        }

        if(window.scrollY > 100) {
            document.getElementById('nav-border').classList.remove('opacity-0');
        } else {
            document.getElementById('nav-border').classList.add('opacity-0');
        }

        if (!this.ticking) {
            window.requestAnimationFrame(function() {
                const targetElement = document.getElementById('nav-border-animated');
                const maxScrollHeight = document.documentElement.scrollHeight - window.innerHeight;
                
                // Calculate width as a percentage of how far the user has scrolled
                const widthPercentage = (this.lastKnownScrollY / maxScrollHeight) * 100;

                targetElement.style.width = `${Math.min(widthPercentage, 100)}%`;
                this.ticking = false;
                this.ticking = false;
            });

            this.ticking = true;
        }
    });

    setTimeout(function(){
        calculateMarkerPosition(document.querySelector('[data-' + active +']'));
    }, 10);
    setTimeout(function(){
        document.getElementById('marker').classList.add('ease-out', 'duration-300');
    }, 100);
" 
@close-mobile-menu.window="mobileMenu=false"
:class="{ 'h-16 md:h-20 border-neutral-600/10 dark:border-neutral-300/10 md:border-transparent' : !scrolled, 'h-14 md:h-[70px]  border-neutral-600/10 dark:border-neutral-300/10' : scrolled }"
class="box-border sticky z-[102] flex top-0 ease-out duration-200 border-b items-center w-full leading-10 text-center bg-opacity-90 dark:bg-opacity-80 bg-white dark:bg-neutral-950 backdrop-blur-xl">

    <div id="nav-border" class="absolute bottom-0 left-0 w-full h-px duration-500 ease-out opacity-0">
        <div class="relative w-full h-px bg-white dark:bg-neutral-950 opacity-20"></div>
    </div>
    <div id="nav-border-animated" class="absolute bottom-0 left-0 w-0 h-0.5 translate-y-0.5 bg-neutral-900 dark:bg-neutral-100"></div>
    <div :class="{ 'px-6 md:px-9' : !scrolled, 'px-3 md:px-9' : scrolled }" id="nav-container" class="relative z-40 w-full mx-auto leading-10 text-center duration-300 ease-out max-w-7xl">
        <div class="box-border flex flex-wrap items-center justify-between text-neutral-900">
            
                <button x-on:click="sidebarOpenClick()" class="flex flex-shrink-0 justify-center items-center mr-1 w-9 h-9 text-neutral-900 rounded-md -translate-x-1.5 hover:bg-neutral-100 hover:text-neutral-900 dark:text-neutral-100 dark:hover:bg-neutral-800 dark:hover:text-white md:hidden">
                    <svg x-show="docsAvailable" class="w-[25px] h-[25px] fill-current" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><g fill="none" stroke="currentColor"><path d="M2.74902 6.75C2.74902 5.09315 4.09217 3.75 5.74902 3.75H18.2507C19.9075 3.75 21.2507 5.09315 21.2507 6.75V17.25C21.2507 18.9069 19.9075 20.25 18.2507 20.25H5.74902C4.09217 20.25 2.74902 18.9069 2.74902 17.25V6.75Z" stroke="%23a9a9af" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path><path d="M10.25 3.75V20.25" stroke="%23a9a9af" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path><path d="M5.75 7.75L7.25 7.75" stroke="%23a9a9af" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path><path d="M5.75 11L7.25 11" stroke="%23a9a9af" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path><path d="M5.75 14.25L7.25 14.25" stroke="%23a9a9af" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path></g></svg>
                    <svg x-show="!docsAvailable" class="w-[25px] h-[25px]" xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 256 256"><path d="M184,112a8,8,0,0,1-8,8H112a8,8,0,0,1,0-16h64A8,8,0,0,1,184,112Zm-8,24H112a8,8,0,0,0,0,16h64a8,8,0,0,0,0-16Zm48-88V208a16,16,0,0,1-16,16H48a16,16,0,0,1-16-16V48A16,16,0,0,1,48,32H208A16,16,0,0,1,224,48ZM48,208H72V48H48Zm160,0V48H88V208H208Z"></path></svg>
                </button>
                <div class="relative flex items-center w-auto leading-10 lg:flex-grow-0 lg:flex-shrink-0 lg:text-left">
                    <include src="logo.html"></include>
                </div>
            <div 
                :class="{ mobileMenu : 'flex z-[99] flex-col', 'md:flex hidden' : !mobileMenu, 'translate-y-[168px] md:translate-y-0 scale-100 md:scale-100' : !scrolled, 'translate-y-[164px] md:translate-y-0 scale-100 md:scale-[0.98]' : scrolled }"
                class="absolute z-50 flex-col items-center justify-center w-full h-auto text-xs font-semibold text-center duration-300 ease-out -translate-x-1/2 text-neutral-400 md:rounded-full md:w-auto md:h-10 left-1/2 md:flex-row md:items-center" x-cloak
            >
                <div class="absolute top-0 right-0 w-full h-full bg-white bg-opacity-100 dark:bg-neutral-900 md:bg-neutral-600 md:bg-opacity-5 md:rounded-full"></div>
                <div id="marker" class="absolute top-0 left-0 z-20 hidden w-auto h-auto duration-300 ease-out bg-white shadow-sm dark:bg-neutral-700/50 backdrop-blur-lg md:block md:rounded-full" 
                    :style="'width:' + markerPosition.width + 'px; height:' + markerPosition.height + 'px; top:' + markerPosition.top + 'px; left:' + markerPosition.left + 'px;'"
                    ></div>
                <div id="nav-items" class="relative z-50 flex-col  items-center justify-center w-full h-auto md:px-1.5 py-[5px] md:border-t-0 md:border-b-0 border-t border-b text-xl md:text-xs dark:border-neutral-800 font-semibold text-center text-neutral-400 md:rounded-full md:w-auto md:h-10 md:flex-row md:items-center">
                    <button hx-get="{ url('/?newwave=true') }" hx-target="#site-content" hx-select="#site-content" hx-ext="alpine-morph" hx-swap="morph" hx-push-url="true" data-home @click="active='home'; fullWidth=false; scrollTop(); resetProgressWidth(); mobileMenu=false" @mouseenter="calculateMarkerPosition($el); hovered='home'" @mouseleave="markerPositionOriginalPosition()" 
                        :class="{ 'text-neutral-900 dark:text-white' : active == 'home', 'text-neutral-400 dark:text-neutral-400': active != 'home' }"
                        class="relative inline-flex items-center justify-center flex-shrink-0 w-full h-full px-3 py-3 my-2 leading-tight text-center transition-colors hover:text-neutral-900 dark:hover:text-white md:rounded-full md:py-2 group md:my-0 md:w-auto md:text-center">
                        <span>Home</span>
                        <span 
                            :class="{ 'w-full left-0' : active=='home', 'w-0 left-1/2' : active!='home' }"    
                            class="absolute bottom-0 px-1.5 h-px duration-300 ease-out translate-y-1.5"><span class="relative block w-full h-px bg-gradient-to-r opacity-30 md:from-white/0 md:via-white md:to-white/0"></span></span>
                    </button> 
                    <button hx-get="{ url('/themes') }" hx-target="#site-content" hx-select="#site-content" hx-ext="alpine-morph" hx-swap="morph" hx-push-url="true" @click="active='themes'; fullWidth=true; scrollTop(); resetProgressWidth(); route=$el.getAttribute('hx-get');  mobileMenu=false" data-themes @mouseenter="calculateMarkerPosition($el); hovered='themes'" @mouseleave="markerPositionOriginalPosition()" 
                        :class="{ 'text-neutral-900 dark:text-white' : active == 'themes', 'text-neutral-400 dark:text-neutral-400': active != 'themes' }"
                        class="relative inline-flex items-center justify-center flex-shrink-0 w-full h-full px-3 py-3 my-2 leading-tight text-center transition-colors hover:text-neutral-900 dark:hover:text-white md:rounded-full md:py-2 group md:my-0 md:w-auto md:text-center">
                        <span>Themes</span>
                        <span 
                            :class="{ 'w-full left-0' : active=='themes', 'w-0 left-1/2' : active!='themes' }"    
                            class="absolute bottom-0 px-1.5 h-px duration-300 ease-out translate-y-1.5"><span class="relative block w-full h-px bg-gradient-to-r opacity-30 md:from-white/0 md:via-white md:to-white/0"></span></span>
                    </button> 
                    <button href="/components" @mouseenter="calculateMarkerPosition($el); hovered='components'" 
                        :class="{ 'text-white' : active == 'components', 'text-white/80': active != 'components' }"
                        class="relative inline-flex items-center justify-center flex-shrink-0 hidden w-full h-full px-3 py-3 my-2 leading-tight text-center transition-colors md:rounded-full md:py-2 group md:my-0 md:w-auto md:text-center">
                        <span>Components</span>
                        <span 
                            :class="{ 'w-full left-0' : active=='components', 'w-0 left-1/2' : active!='components' }"    
                            class="absolute bottom-0 px-1.5 h-px duration-300 ease-out translate-y-1.5"><span class="relative block w-full h-px bg-gradient-to-r opacity-30 md:from-white/0 md:via-white md:to-white/0"></span></span>
                    </button> 
                    <button hx-get="{ url('/docs/getting-started') }" hx-target="#site-content" hx-select="#site-content" hx-ext="alpine-morph" hx-swap="morph" hx-push-url="true" @click="active='docs'; fullWidth=true; scrollTop(); resetProgressWidth(); route=$el.getAttribute('hx-get');  mobileMenu=false" data-docs @mouseenter="calculateMarkerPosition($el); hovered='docs'" @mouseleave="markerPositionOriginalPosition()" 
                        :class="{ 'text-neutral-900 dark:text-white' : active == 'docs', 'text-neutral-400 dark:text-neutral-400': active != 'docs' }"
                        class="relative inline-flex items-center justify-center flex-shrink-0 w-full h-full px-3 py-3 my-2 leading-tight text-center transition-colors hover:text-neutral-900 dark:hover:text-white md:rounded-full md:py-2 group md:my-0 md:w-auto md:text-center">
                        <span>Documentation</span>
                        <span 
                            :class="{ 'w-full left-0' : active=='docs', 'w-0 left-1/2' : active!='docs' }"    
                            class="absolute bottom-0 px-1.5 h-px duration-300 ease-out translate-y-1.5"><span class="relative block w-full h-px bg-gradient-to-r opacity-30 md:from-white/0 md:via-white md:to-white/0"></span></span>
                    </button>
                    <a href="https://github.com/thedevdojo/wave" target="_blank"
                        class="relative inline-flex items-center justify-center flex-shrink-0 w-full h-full px-3 py-5 leading-tight text-center transition-colors text-neutral-500 dark:text-neutral-300 dark:hover:text-neutral-100 md:rounded-full group hover:text-neutral-700 md:py-2 md:w-auto md:text-center">
                        <span class="absolute inset-0 scale-100 shadow-sm md:bg-neutral-50 dark:md:bg-neutral-800 md:rounded-full group-hover:bg-white group-hover:dark:bg-neutral-700/50"></span>
                        <span class="relative z-10 flex items-center pl-4 duration-300 ease-out group-hover:pr-4">
                            <svg class="absolute left-0 w-4 h-4 -translate-x-1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 48 48" fill="none"><path fill="currentColor" fill-rule="evenodd" d="M24.02 0C10.738 0 0 10.817 0 24.198 0 34.895 6.88 43.95 16.424 47.154c1.193.241 1.63-.52 1.63-1.161 0-.561-.039-2.484-.039-4.488-6.682 1.443-8.073-2.884-8.073-2.884-1.074-2.805-2.665-3.525-2.665-3.525-2.187-1.483.16-1.483.16-1.483 2.425.16 3.698 2.484 3.698 2.484 2.147 3.686 5.607 2.644 7 2.003.198-1.562.834-2.644 1.51-3.245-5.329-.56-10.936-2.644-10.936-11.939 0-2.644.954-4.807 2.466-6.49-.239-.6-1.074-3.085.239-6.41 0 0 2.028-.641 6.6 2.484 1.959-.53 3.978-.8 6.006-.802 2.028 0 4.095.281 6.005.802 4.573-3.125 6.601-2.484 6.601-2.484 1.313 3.325.477 5.81.239 6.41 1.55 1.683 2.465 3.846 2.465 6.49 0 9.295-5.607 11.338-10.976 11.94.876.76 1.63 2.202 1.63 4.486 0 3.245-.039 5.85-.039 6.65 0 .642.438 1.403 1.63 1.163C41.12 43.949 48 34.895 48 24.198 48.04 10.817 37.262 0 24.02 0Z" clip-rule="evenodd"></path></svg>
                            <span>Github</span>
                            <svg class="absolute right-0 w-4 h-4 ml-1 translate-x-px translate-y-px opacity-0 ease group-hover:delay-50 group-hover:duration-300 group-hover:translate-y-0 group-hover:opacity-100 group-hover:translate-x-0" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="w-5 h-5">
                                <path fill-rule="evenodd" d="M5.22 14.78a.75.75 0 001.06 0l7.22-7.22v5.69a.75.75 0 001.5 0v-7.5a.75.75 0 00-.75-.75h-7.5a.75.75 0 000 1.5h5.69l-7.22 7.22a.75.75 0 000 1.06z" clip-rule="evenodd" />
                              </svg>
                        </span>
                    </a>

                </div>
                
            </div>

            

            <div class="hidden lg:ml-8 md:flex lg:items-center">
                <button onclick="document.querySelector('.DocSearch').click();" class="p-2 mr-1 rounded-full group hover:bg-neutral-200 dark:hover:bg-neutral-700">
                    <svg class="w-5 h-5 fill-current text-neutral-500 group-hover:text-neutral-700 dark:group-hover:text-neutral-300" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 256 256"><path fill="none" d="M0 0h256v256H0z"/><circle cx="112" cy="112" r="80" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="16"/><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="16" d="M168.57 168.57 224 224"/></svg>
                </button>
                <div :class="{ 'scale-100': !scrolled, 'scale-[0.98]' : scrolled }" class="relative flex items-center justify-center p-1 overflow-hidden duration-300 ease-out border rounded-full border-neutral-200 dark:border-neutral-800 group">
                    <div class="absolute top-1/2 left-1/2 -translate-x-1/2 w-[150px] rounded-full group-hover:opacity-100 opacity-0 blur-sm duration-300 ease-out scale-100 h-[150px] -translate-y-1/2 origin-center">
                        <span class="absolute inset-0 w-full h-full rounded-full bg-gradient-to-r from-indigo-500 via-teal-300 to-blue-500 group-hover:animate-spin-slow"></span>
                    </div>
                    <a class="inline-flex z-10 justify-center px-3.5 py-2.5 text-xs font-semibold text-white bg-neutral-900 dark:text-neutral-900 dark:bg-neutral-100 dark:hover:bg-white rounded-full shadow-sm shadow-xl group hover:bg-black" href="/wave/download">
                        <svg class="mr-1 w-4 h-4 duration-300 ease-out group-hover:-translate-x-0.5" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 256 256"><rect width="256" height="256" fill="none"/><path d="M208,216H48a8,8,0,0,1-8-8V72L56,40H200l16,32V208A8,8,0,0,1,208,216Z" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="16"/><line x1="40" y1="72" x2="216" y2="72" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="16"/><line x1="128" y1="104" x2="128" y2="184" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="16"/><polyline points="96 152 128 184 160 152" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="16"/></svg>
                        <span>Download</span>
                    </a>
                </div>

            </div>

            <!-- Mobile Buton -->
            <div  class="relative flex items-center space-x-3 font-medium leading-10 md:hidden md:flex-grow-0 md:flex-shrink-0 md:mt-0 md:text-right lg:flex-grow-0 lg:flex-shrink-0">
                <button @click="document.querySelector('.DocSearch').click();" class="block h-full p-2 duration-100 ease-out group md:hidden dark:text-neutral-100 dark:hover:text-white">
                    <svg class="w-6 h-6 duration-200 ease-out fill-current" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 256 256"><path fill="none" d="M0 0h256v256H0z"/><circle cx="112" cy="112" r="80" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="16"/><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="16" d="M168.57 168.57 224 224"/></svg>
                </button>
            </div>
        </div>
    </div>
</header>